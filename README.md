# 后端接口权限控制方案

## 简介

* 基于Spring Boot 2.7.9版本、Spring Security 5.7.7版本。
* 此方案只针对Spring Security部分组件进行自定义封装，其中只包含**授权**和**基于URL的权限控制**，不包含**认证**，因为认证通常都是自定义接口去完成认证的；认证简单理解就是登录（防止某些人不懂）。
* 此方案中基于URL的权限控制依旧使用的是**角色**来进行控制的，这里使用的还是Spring Security的组件来处理的，并没有去自定义。如何进行自定义后续有时间会出一套Spring Security的教程。
* 此方案并没有实现RABC，需要你自定义去实现，使用此方案你唯一要实现的地方就是这里。

## 使用

* 现在我们先明确两点：用户拥有那些权限角色、访问的目标资源需要那些权限角色；这两点就是你需要自定义实现的。
* **用户拥有那些权限角色：**继承**AbstractVisitorPermissionProvider**实现抽象方法并注入到IOC容器中；在抽象方中获取到用户拥有的角色字符串标识并返回，这里需要返回的是角色而不是权限，如果返回的时权限需要自定义Spring Security的组件，不然无法完成权限校验。

* **访问的目标资源需要那些权限角色**：继承**AbstractTargetPermissionProvider**实现抽象方法并注入到IOC容器中；在抽象方中获取到访问目标资源需要的角色字符串标识并返回，这里需要返回的是角色而不是权限。

  

